# 16-分段
## KeyPoint
1. 段错误：在支持分段的机器上发生了非法的内存访问。
2. 
## 问
1. 硬件在地址转换时使用段寄存器。它如何知道段内的偏移量，以及地址引用了哪个段?  
2. 栈的地址是反向增长，怎么办？  
3. 操作系统在上下文切换时应该做什么？  
4. 如果解决外部碎片问题（段与段之间空闲空间的小洞）？
## 答
1. **一种常见的方式是用虚拟地址的开头几位来标识不同的段。有一些系统用两位标识3个段；有些系统用一位标识两个段（将堆和栈当作同一个段）**
2. **通过硬件支持标识段的增长方向**
3. **各个段寄存器中的内容必须保存和恢复**
4. 
    1. 紧凑物理内存，重新安排原有的段：成本高，拷贝需要占据大量cpu时间。
    2. 利用空闲列表管理算法，试图保留大的内存块用于分配：无法完全消除外部碎片。
5. 